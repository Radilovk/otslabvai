<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –Ω–∞ –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ - –û–¢–°–õ–ê–ë–í–ê–ù–ï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .test-section h2 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status.loading {
            background: #ffc107;
            color: #000;
        }
        
        .status.success {
            background: #28a745;
            color: white;
        }
        
        .status.error {
            background: #dc3545;
            color: white;
        }
        
        .info-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
        }
        
        .info-box strong {
            display: block;
            margin-bottom: 5px;
            color: #333;
        }
        
        .info-box span {
            color: #666;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #2196f3;
        }
        
        .instructions h3 {
            color: #1976d2;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .instructions ul {
            margin-left: 20px;
            color: #555;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 10px 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –¢–µ—Å—Ç –Ω–∞ –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ</h1>
        <p class="subtitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ KV —Ö—Ä–∞–Ω–∏–ª–∏—â–µ—Ç–æ –µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–æ –ø—Ä–∞–≤–∏–ª–Ω–æ</p>
        
        <div class="test-section">
            <h2>
                <span id="api-status" class="status loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</span>
                API –¢–µ—Å—Ç
            </h2>
            <div class="info-box" id="api-info">
                <strong>–ü—Ä–æ–≤–µ—Ä—è–≤–∞ —Å–µ API endpoint...</strong>
            </div>
        </div>
        
        <div class="test-section">
            <h2>
                <span id="content-status" class="status loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</span>
                –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ
            </h2>
            <div class="info-box" id="content-info">
                <strong>–ê–Ω–∞–ª–∏–∑–∏—Ä–∞ —Å–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ...</strong>
            </div>
        </div>
        
        <button onclick="runTest()">üîÑ –ü—É—Å–Ω–∏ –æ—Ç–Ω–æ–≤–æ —Ç–µ—Å—Ç–∞</button>
        
        <div class="instructions" id="instructions" style="display: none;">
            <h3>‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ä—Ç –≤—Å–µ –æ—â–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞</h3>
            <p style="margin-bottom: 10px;">–ó–∞ –¥–∞ –≥–æ –∫–æ—Ä–∏–≥–∏—Ä–∞—Ç–µ, —Å–ª–µ–¥–≤–∞–π—Ç–µ —Ç–µ–∑–∏ —Å—Ç—ä–ø–∫–∏:</p>
            <ul>
                <li>–£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –∏–º–∞—Ç–µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω <code>wrangler</code></li>
                <li>–ò–∑–ø—ä–ª–Ω–µ—Ç–µ –∫–æ–º–∞–Ω–¥–∞—Ç–∞:
                    <div class="code">npm run update-kv</div>
                </li>
                <li>–°–ª–µ–¥ —Ç–æ–≤–∞ –ø—Ä–µ–∑–∞—Ä–µ–¥–µ—Ç–µ —Ç–∞–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</li>
            </ul>
            <p style="margin-top: 15px; font-size: 14px;">
                –ó–∞ –ø–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∏–∂—Ç–µ: 
                <a href="docs/–ò–ù–°–¢–†–£–ö–¶–ò–ò-–ü–û–¢–†–ï–ë–ò–¢–ï–õ.md" style="color: #2196f3;">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</a>
            </p>
        </div>
    </div>
    
    <script type="module">
        import { API_URL } from './config.js';
        
        async function runTest() {
            // Reset UI
            document.getElementById('api-status').className = 'status loading';
            document.getElementById('api-status').textContent = '–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...';
            document.getElementById('content-status').className = 'status loading';
            document.getElementById('content-status').textContent = '–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...';
            document.getElementById('instructions').style.display = 'none';
            
            try {
                // Test API connection
                const response = await fetch(`${API_URL}/page_content.json?v=${Date.now()}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                document.getElementById('api-status').className = 'status success';
                document.getElementById('api-status').textContent = '–£—Å–ø–µ—à–Ω–æ';
                document.getElementById('api-info').innerHTML = `
                    <strong>API –µ –¥–æ—Å—Ç—ä–ø–Ω–æ ‚úì</strong>
                    <span>URL: ${API_URL}</span>
                `;
                
                // Parse content
                const data = await response.json();
                
                // Check if content matches expected "–û–¢–°–õ–ê–ë–í–ê–ù–ï" theme
                const siteName = data.settings?.site_name || '';
                const isCorrect = siteName.includes('–û–¢–°–õ–ê–ë–í–ê–ù–ï') || siteName.includes('–æ—Ç—Å–ª–∞–±–≤–∞–Ω–µ');
                
                if (isCorrect) {
                    document.getElementById('content-status').className = 'status success';
                    document.getElementById('content-status').textContent = '–ö–æ—Ä–µ–∫—Ç–Ω–æ ‚úì';
                    document.getElementById('content-info').innerHTML = `
                        <strong>–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ! ‚úì</strong>
                        <span>–ò–º–µ –Ω–∞ —Å–∞–π—Ç–∞: ${siteName}</span><br>
                        <span>–°–ª–æ–≥–∞–Ω: ${data.settings?.site_slogan || 'N/A'}</span><br>
                        <span style="color: #28a745; margin-top: 10px; display: block;">
                            üéâ –ü—Ä–æ–±–ª–µ–º—ä—Ç –µ —Ä–µ—à–µ–Ω! –°–∞–π—Ç—ä—Ç —â–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ.
                        </span>
                    `;
                } else {
                    document.getElementById('content-status').className = 'status error';
                    document.getElementById('content-status').textContent = '–ì—Ä–µ—à–Ω–æ ‚úó';
                    document.getElementById('content-info').innerHTML = `
                        <strong>–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–µ –µ –∫–æ—Ä–µ–∫—Ç–Ω–æ ‚úó</strong>
                        <span>–¢–µ–∫—É—â–æ –∏–º–µ: ${siteName}</span><br>
                        <span>–û—á–∞–∫–≤–∞–Ω–æ –∏–º–µ: –û–¢–°–õ–ê–ë–í–ê–ù–ï</span><br>
                        <span style="color: #dc3545; margin-top: 10px; display: block;">
                            ‚ö†Ô∏è KV —Ö—Ä–∞–Ω–∏–ª–∏—â–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞
                        </span>
                    `;
                    document.getElementById('instructions').style.display = 'block';
                }
                
            } catch (error) {
                document.getElementById('api-status').className = 'status error';
                document.getElementById('api-status').textContent = '–ì—Ä–µ—à–∫–∞';
                document.getElementById('api-info').innerHTML = `
                    <strong>–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ —Å API ‚úó</strong>
                    <span>${error.message}</span>
                `;
                
                document.getElementById('content-status').className = 'status error';
                document.getElementById('content-status').textContent = '–ù–µ—É—Å–ø–µ—à–Ω–æ';
                document.getElementById('content-info').innerHTML = `
                    <strong>–ù–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–≤–µ—Ä–∏ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ</strong>
                    <span>API –µ –Ω–µ–¥–æ—Å—Ç—ä–ø–Ω–æ</span>
                `;
            }
        }
        
        // Run test on page load
        window.runTest = runTest;
        runTest();
    </script>
</body>
</html>
