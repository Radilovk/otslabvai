# Инструкции за Коригиране на Проблема със Съдържанието

## Какъв е проблемът?

Когато отваряте сайта, за част от секундата виждате заглавие "ОТСЛАБВАНЕ" с определени менюта, след което страницата се сменя на друго съдържание с заглавие "BIOCODE" и различни менюта. Това създава объркване и лоша потребителска опит.

## Защо се случва?

HTML файловете на сайта са проектирани за "ОТСЛАБВАНЕ" (продукти за отслабване), но в Cloudflare KV хранилището има запазени стари данни за "BIOCODE" (пептиди). Когато страницата се зарежда:

1. Първо се показва статичното HTML съдържание → "ОТСЛАБВАНЕ"
2. След това JavaScript зарежда данни от API → "BIOCODE" 
3. Страницата се пререндира с новите данни → объркване

## Решение

Трябва да актуализирате Cloudflare KV хранилището с правилното съдържание за "ОТСЛАБВАНЕ".

### Метод 1: Използване на Wrangler (Препоръчително) ⭐

Това е най-бързият и надежден начин:

```bash
# 1. Инсталирайте wrangler (ако не е инсталиран)
npm install -g wrangler

# 2. Влезте в Cloudflare акаунта си
wrangler login

# 3. Изпълнете скрипта за актуализация
npm run update-kv
```

Или директно:
```bash
./scripts/update-kv-with-wrangler.sh
```

### Метод 2: Ръчна актуализация през Cloudflare Dashboard

Ако предпочитате GUI интерфейс:

1. **Влезте в Cloudflare Dashboard**: https://dash.cloudflare.com/
2. **Отидете на Workers & Pages** → **KV**
3. **Изберете** `PAGE_CONTENT` namespace
4. **Намерете или създайте** ключа `page_content`
5. **Копирайте съдържанието** от файла `page_content_mock.json`
6. **Поставете го** в полето за стойност
7. **Запазете**

### Метод 3: Използване на Admin Panel (ако имате достъп)

Ако имате достъп до админ панела на сайта:

1. Отворете `https://вашия-домейн.com/admin.html`
2. Отидете в секцията "Content Management"
3. Кликнете "Load from Mock Data" или поставете съдържанието от `page_content_mock.json`
4. Кликнете "Save"

### Метод 4: Използване на API (ако API е достъпно)

```bash
npm run update-kv-api
```

## Проверка дали работи

След като актуализирате KV хранилището:

1. **Изчистете кеша на браузъра** (Ctrl+Shift+Delete)
2. **Презаредете страницата**
3. **Проверете**, че вече не виждате смяна на съдържанието
4. **Уверете се**, че се показва само "ОТСЛАБВАНЕ" брандинг

## Очаквано Съдържание

След коригирането, сайтът трябва да показва:

- ✅ **Име на сайта**: ОТСЛАБВАНЕ
- ✅ **Слоган**: Ефективни решения за здравословен живот
- ✅ **Навигация**: За нас, Как работи, Продукти, Отзиви, Въпроси, Контакти
- ✅ **Тема**: Продукти за отслабване
- ✅ **Няма да има** смяна на съдържание при зареждане

## Допълнителни Подобрения

Освен актуализацията на KV, направихме и следните подобрения:

### 1. Плавен преход при зареждане

Добавихме код, който скрива страницата докато се зарежда съдържанието и след това го показва с плавна анимация. Това предотвратява "мигането" на грешното съдържание, дори ако KV все още не е актуализиран.

### 2. Автоматично превключване на резервно съдържание

Ако API не е достъпен, сайтът автоматично ще използва локалното `page_content_mock.json` като резервен вариант. Това означава, че сайтът ще продължи да работи дори при проблеми с API.

## Често Задавани Въпроси

### Защо се е случило това?

Хранилището първоначално е било създадено за друг проект ("BIOCODE"), но HTML файловете са били актуализирани за нов проект ("ОТСЛАБВАНЕ"). KV данните не са били синхронизирани.

### Как да предотвратя това в бъдеще?

- Винаги когато променяте HTML дизайна, актуализирайте и KV съдържанието
- Използвайте версии в имената на променливите за проследяване
- Тествайте локално преди да публикувате промени

### Какво ако нямам достъп до Cloudflare?

Свържете се с администратора на сайта или с лицето, което има достъп до Cloudflare акаунта. Споделете с тях този документ.

### Безопасно ли е да изтрия стария "BIOCODE" съдържание?

Да, след като актуализирате с новото съдържание за "ОТСЛАБВАНЕ", старото съдържание вече не е нужно.

## Помощ и Поддръжка

Ако срещнете проблеми:

1. Проверете дали имате правилни права за достъп до Cloudflare
2. Уверете се, че сте влезли в правилния акаунт
3. Проверете дали файлът `page_content_mock.json` съществува и е валиден JSON
4. Погледнете логовете в конзолата за грешки

За техническа поддръжка, свържете се с разработчика.

## Допълнителна Документация

- Пълна техническа документация: [docs/FIX-CONTENT-MISMATCH.md](FIX-CONTENT-MISMATCH.md)
- Обща документация: [../README.md](../README.md)
